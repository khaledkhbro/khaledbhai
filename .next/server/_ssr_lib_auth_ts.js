"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_lib_auth_ts";
exports.ids = ["_ssr_lib_auth_ts"];
exports.modules = {

/***/ "(ssr)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   activateUser: () => (/* binding */ activateUser),\n/* harmony export */   clearStoredUser: () => (/* binding */ clearStoredUser),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getNextUserId: () => (/* binding */ getNextUserId),\n/* harmony export */   getStoredUser: () => (/* binding */ getStoredUser),\n/* harmony export */   getUser: () => (/* binding */ getUser),\n/* harmony export */   initializeDefaultUsers: () => (/* binding */ initializeDefaultUsers),\n/* harmony export */   saveUserToDatabase: () => (/* binding */ saveUserToDatabase),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signOut: () => (/* binding */ signOut),\n/* harmony export */   signUp: () => (/* binding */ signUp),\n/* harmony export */   storeUser: () => (/* binding */ storeUser),\n/* harmony export */   suspendUserWithReason: () => (/* binding */ suspendUserWithReason),\n/* harmony export */   toggleUserSuspension: () => (/* binding */ toggleUserSuspension),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\n// Authentication utilities and types\nfunction getAllUsers() {\n    if (true) return [];\n    const stored = localStorage.getItem(\"users_database\");\n    return stored ? JSON.parse(stored) : [];\n}\nfunction saveUserToDatabase(user) {\n    if (true) return;\n    const users = getAllUsers();\n    const existingIndex = users.findIndex((u)=>u.email === user.email);\n    if (existingIndex >= 0) {\n        users[existingIndex] = user;\n    } else {\n        users.push(user);\n    }\n    localStorage.setItem(\"users_database\", JSON.stringify(users));\n}\nfunction getNextUserId() {\n    const users = getAllUsers();\n    const maxId = users.reduce((max, user)=>{\n        const numId = Number.parseInt(user.id);\n        return isNaN(numId) ? max : Math.max(max, numId);\n    }, 0);\n    return String(maxId + 1).padStart(2, \"0\");\n}\nfunction initializeDefaultUsers() {\n    const users = getAllUsers();\n    if (users.length === 0) {\n        const defaultUsers = [\n            {\n                id: \"01\",\n                email: \"admin@marketplace.com\",\n                firstName: \"Admin\",\n                lastName: \"User\",\n                username: \"admin\",\n                userType: \"admin\",\n                isVerified: true,\n                deposit: 0,\n                earning: 0,\n                country: \"United States\",\n                createdAt: new Date().toISOString()\n            },\n            {\n                id: \"02\",\n                email: \"worker1@marketplace.com\",\n                firstName: \"John\",\n                lastName: \"Worker\",\n                username: \"johnworker\",\n                userType: \"user\",\n                isVerified: true,\n                deposit: 0,\n                earning: 0,\n                country: \"United States\",\n                createdAt: new Date().toISOString()\n            },\n            {\n                id: \"03\",\n                email: \"employer1@marketplace.com\",\n                firstName: \"Jane\",\n                lastName: \"Employer\",\n                username: \"janeemployer\",\n                userType: \"user\",\n                isVerified: true,\n                deposit: 100,\n                earning: 0,\n                country: \"United States\",\n                createdAt: new Date().toISOString()\n            }\n        ];\n        defaultUsers.forEach((user)=>saveUserToDatabase(user));\n        console.log(\"[v0] âœ… Initialized default users:\", defaultUsers.map((u)=>`${u.firstName} ${u.lastName} (ID: ${u.id})`));\n    }\n}\n// Mock authentication functions (replace with real API calls when database is connected)\nasync function signIn(email, password) {\n    // Simulate API call\n    await new Promise((resolve)=>setTimeout(resolve, 1000));\n    const users = getAllUsers();\n    const user = users.find((u)=>u.email === email);\n    if (!user) {\n        throw new Error(\"Invalid email or password\");\n    }\n    if (user.userType === \"suspended\") {\n        const reason = user.suspensionReason || \"No reason provided\";\n        throw new Error(`Your account has been suspended. Reason: ${reason}`);\n    }\n    if (email === \"admin@marketplace.com\" && password === \"admin123\") {\n        console.log(\"[v0] Admin login successful for:\", user.email);\n        return user;\n    }\n    if (password === \"password123\" || password.length >= 8) {\n        console.log(\"[v0] User login successful for:\", user.email);\n        return user;\n    }\n    throw new Error(\"Invalid email or password\");\n}\nasync function signUp(data) {\n    // Simulate API call\n    await new Promise((resolve)=>setTimeout(resolve, 1000));\n    if (!isValidEmail(data.email)) {\n        throw new Error(\"Please enter a valid email address\");\n    }\n    if (data.password.length < 8) {\n        throw new Error(\"Password must be at least 8 characters long\");\n    }\n    if (!isValidPassword(data.password)) {\n        throw new Error(\"Password must contain at least one uppercase letter, one lowercase letter, and one number\");\n    }\n    if (data.username.length < 3) {\n        throw new Error(\"Username must be at least 3 characters long\");\n    }\n    if (!/^[a-zA-Z0-9_]+$/.test(data.username)) {\n        throw new Error(\"Username can only contain letters, numbers, and underscores\");\n    }\n    const users = getAllUsers();\n    const existingUser = users.find((u)=>u.email === data.email || u.username === data.username);\n    if (existingUser) {\n        if (existingUser.email === data.email) {\n            throw new Error(\"An account with this email already exists\");\n        } else {\n            throw new Error(\"This username is already taken\");\n        }\n    }\n    const newUser = {\n        id: getNextUserId(),\n        email: data.email,\n        firstName: data.firstName,\n        lastName: data.lastName,\n        username: data.username,\n        userType: \"user\",\n        isVerified: false,\n        deposit: 0,\n        earning: 0,\n        country: \"United States\",\n        createdAt: new Date().toISOString()\n    };\n    saveUserToDatabase(newUser);\n    return newUser;\n}\nasync function signOut() {\n    // Simulate API call\n    await new Promise((resolve)=>setTimeout(resolve, 500));\n}\nfunction getStoredUser() {\n    if (true) return null;\n    const stored = localStorage.getItem(\"user\");\n    return stored ? JSON.parse(stored) : null;\n}\nfunction storeUser(user) {\n    if (true) return;\n    localStorage.setItem(\"user\", JSON.stringify(user));\n}\nfunction clearStoredUser() {\n    if (true) return;\n    localStorage.removeItem(\"user\");\n}\nfunction isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\nfunction isValidPassword(password) {\n    // At least 8 characters, one uppercase, one lowercase, one number\n    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$/;\n    return passwordRegex.test(password);\n}\nfunction updateUser(userId, updates) {\n    const users = getAllUsers();\n    const userIndex = users.findIndex((u)=>u.id === userId);\n    if (userIndex === -1) {\n        throw new Error(\"User not found\");\n    }\n    const updatedUser = {\n        ...users[userIndex],\n        ...updates\n    };\n    users[userIndex] = updatedUser;\n    localStorage.setItem(\"users_database\", JSON.stringify(users));\n    return updatedUser;\n}\nfunction toggleUserSuspension(userId) {\n    const users = getAllUsers();\n    const userIndex = users.findIndex((u)=>u.id === userId);\n    if (userIndex === -1) {\n        throw new Error(\"User not found\");\n    }\n    const user = users[userIndex];\n    // Toggle between user and suspended status (using a custom field)\n    const updatedUser = {\n        ...user,\n        isSuspended: !user.isSuspended\n    };\n    users[userIndex] = updatedUser;\n    localStorage.setItem(\"users_database\", JSON.stringify(users));\n    return updatedUser;\n}\nfunction suspendUserWithReason(userId, reason, suspendedBy) {\n    const users = getAllUsers();\n    const userIndex = users.findIndex((u)=>u.id === userId);\n    if (userIndex === -1) {\n        throw new Error(\"User not found\");\n    }\n    const updatedUser = {\n        ...users[userIndex],\n        userType: \"suspended\",\n        suspensionReason: reason,\n        suspendedAt: new Date().toISOString(),\n        suspendedBy: suspendedBy\n    };\n    users[userIndex] = updatedUser;\n    localStorage.setItem(\"users_database\", JSON.stringify(users));\n    return updatedUser;\n}\nfunction activateUser(userId) {\n    const users = getAllUsers();\n    const userIndex = users.findIndex((u)=>u.id === userId);\n    if (userIndex === -1) {\n        throw new Error(\"User not found\");\n    }\n    const updatedUser = {\n        ...users[userIndex],\n        userType: \"user\",\n        suspensionReason: undefined,\n        suspendedAt: undefined,\n        suspendedBy: undefined\n    };\n    users[userIndex] = updatedUser;\n    localStorage.setItem(\"users_database\", JSON.stringify(users));\n    return updatedUser;\n}\nasync function getUser() {\n    // In a real implementation, this would validate JWT tokens or session cookies\n    // For now, we'll simulate getting the current user from localStorage on the client\n    // or return null on the server (since we don't have real session management)\n    if (true) {\n        // Server-side: In a real app, you'd validate session tokens here\n        // For demo purposes, return a mock admin user for API calls\n        return {\n            id: \"01\",\n            email: \"admin@marketplace.com\",\n            firstName: \"Admin\",\n            lastName: \"User\",\n            username: \"admin\",\n            userType: \"admin\",\n            isVerified: true,\n            deposit: 0,\n            earning: 0,\n            country: \"United States\",\n            createdAt: new Date().toISOString()\n        };\n    }\n    // Client-side: Get user from localStorage\n    return getStoredUser();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxxQ0FBcUM7QUEwQjlCLFNBQVNBO0lBQ2QsSUFBSSxJQUE2QixFQUFFLE9BQU8sRUFBRTtJQUU1QyxNQUFNQyxTQUFTQyxhQUFhQyxPQUFPLENBQUM7SUFDcEMsT0FBT0YsU0FBU0csS0FBS0MsS0FBSyxDQUFDSixVQUFVLEVBQUU7QUFDekM7QUFFTyxTQUFTSyxtQkFBbUJDLElBQVU7SUFDM0MsSUFBSSxJQUE2QixFQUFFO0lBRW5DLE1BQU1DLFFBQVFSO0lBQ2QsTUFBTVMsZ0JBQWdCRCxNQUFNRSxTQUFTLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsS0FBSyxLQUFLTCxLQUFLSyxLQUFLO0lBRW5FLElBQUlILGlCQUFpQixHQUFHO1FBQ3RCRCxLQUFLLENBQUNDLGNBQWMsR0FBR0Y7SUFDekIsT0FBTztRQUNMQyxNQUFNSyxJQUFJLENBQUNOO0lBQ2I7SUFFQUwsYUFBYVksT0FBTyxDQUFDLGtCQUFrQlYsS0FBS1csU0FBUyxDQUFDUDtBQUN4RDtBQUVPLFNBQVNRO0lBQ2QsTUFBTVIsUUFBUVI7SUFDZCxNQUFNaUIsUUFBUVQsTUFBTVUsTUFBTSxDQUFDLENBQUNDLEtBQUtaO1FBQy9CLE1BQU1hLFFBQVFDLE9BQU9DLFFBQVEsQ0FBQ2YsS0FBS2dCLEVBQUU7UUFDckMsT0FBT0MsTUFBTUosU0FBU0QsTUFBTU0sS0FBS04sR0FBRyxDQUFDQSxLQUFLQztJQUM1QyxHQUFHO0lBRUgsT0FBT00sT0FBT1QsUUFBUSxHQUFHVSxRQUFRLENBQUMsR0FBRztBQUN2QztBQUVPLFNBQVNDO0lBQ2QsTUFBTXBCLFFBQVFSO0lBRWQsSUFBSVEsTUFBTXFCLE1BQU0sS0FBSyxHQUFHO1FBQ3RCLE1BQU1DLGVBQXVCO1lBQzNCO2dCQUNFUCxJQUFJO2dCQUNKWCxPQUFPO2dCQUNQbUIsV0FBVztnQkFDWEMsVUFBVTtnQkFDVkMsVUFBVTtnQkFDVkMsVUFBVTtnQkFDVkMsWUFBWTtnQkFDWkMsU0FBUztnQkFDVEMsU0FBUztnQkFDVEMsU0FBUztnQkFDVEMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1lBQ25DO1lBQ0E7Z0JBQ0VsQixJQUFJO2dCQUNKWCxPQUFPO2dCQUNQbUIsV0FBVztnQkFDWEMsVUFBVTtnQkFDVkMsVUFBVTtnQkFDVkMsVUFBVTtnQkFDVkMsWUFBWTtnQkFDWkMsU0FBUztnQkFDVEMsU0FBUztnQkFDVEMsU0FBUztnQkFDVEMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1lBQ25DO1lBQ0E7Z0JBQ0VsQixJQUFJO2dCQUNKWCxPQUFPO2dCQUNQbUIsV0FBVztnQkFDWEMsVUFBVTtnQkFDVkMsVUFBVTtnQkFDVkMsVUFBVTtnQkFDVkMsWUFBWTtnQkFDWkMsU0FBUztnQkFDVEMsU0FBUztnQkFDVEMsU0FBUztnQkFDVEMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1lBQ25DO1NBQ0Q7UUFFRFgsYUFBYVksT0FBTyxDQUFDLENBQUNuQyxPQUFTRCxtQkFBbUJDO1FBQ2xEb0MsUUFBUUMsR0FBRyxDQUNULHFDQUNBZCxhQUFhZSxHQUFHLENBQUMsQ0FBQ2xDLElBQU0sR0FBR0EsRUFBRW9CLFNBQVMsQ0FBQyxDQUFDLEVBQUVwQixFQUFFcUIsUUFBUSxDQUFDLE1BQU0sRUFBRXJCLEVBQUVZLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFeEU7QUFDRjtBQUVBLHlGQUF5RjtBQUNsRixlQUFldUIsT0FBT2xDLEtBQWEsRUFBRW1DLFFBQWdCO0lBQzFELG9CQUFvQjtJQUNwQixNQUFNLElBQUlDLFFBQVEsQ0FBQ0MsVUFBWUMsV0FBV0QsU0FBUztJQUVuRCxNQUFNekMsUUFBUVI7SUFDZCxNQUFNTyxPQUFPQyxNQUFNMkMsSUFBSSxDQUFDLENBQUN4QyxJQUFNQSxFQUFFQyxLQUFLLEtBQUtBO0lBRTNDLElBQUksQ0FBQ0wsTUFBTTtRQUNULE1BQU0sSUFBSTZDLE1BQU07SUFDbEI7SUFFQSxJQUFJN0MsS0FBSzJCLFFBQVEsS0FBSyxhQUFhO1FBQ2pDLE1BQU1tQixTQUFTOUMsS0FBSytDLGdCQUFnQixJQUFJO1FBQ3hDLE1BQU0sSUFBSUYsTUFBTSxDQUFDLHlDQUF5QyxFQUFFQyxRQUFRO0lBQ3RFO0lBRUEsSUFBSXpDLFVBQVUsMkJBQTJCbUMsYUFBYSxZQUFZO1FBQ2hFSixRQUFRQyxHQUFHLENBQUMsb0NBQW9DckMsS0FBS0ssS0FBSztRQUMxRCxPQUFPTDtJQUNUO0lBRUEsSUFBSXdDLGFBQWEsaUJBQWlCQSxTQUFTbEIsTUFBTSxJQUFJLEdBQUc7UUFDdERjLFFBQVFDLEdBQUcsQ0FBQyxtQ0FBbUNyQyxLQUFLSyxLQUFLO1FBQ3pELE9BQU9MO0lBQ1Q7SUFFQSxNQUFNLElBQUk2QyxNQUFNO0FBQ2xCO0FBRU8sZUFBZUcsT0FBT0MsSUFNNUI7SUFDQyxvQkFBb0I7SUFDcEIsTUFBTSxJQUFJUixRQUFRLENBQUNDLFVBQVlDLFdBQVdELFNBQVM7SUFFbkQsSUFBSSxDQUFDUSxhQUFhRCxLQUFLNUMsS0FBSyxHQUFHO1FBQzdCLE1BQU0sSUFBSXdDLE1BQU07SUFDbEI7SUFFQSxJQUFJSSxLQUFLVCxRQUFRLENBQUNsQixNQUFNLEdBQUcsR0FBRztRQUM1QixNQUFNLElBQUl1QixNQUFNO0lBQ2xCO0lBRUEsSUFBSSxDQUFDTSxnQkFBZ0JGLEtBQUtULFFBQVEsR0FBRztRQUNuQyxNQUFNLElBQUlLLE1BQU07SUFDbEI7SUFFQSxJQUFJSSxLQUFLdkIsUUFBUSxDQUFDSixNQUFNLEdBQUcsR0FBRztRQUM1QixNQUFNLElBQUl1QixNQUFNO0lBQ2xCO0lBRUEsSUFBSSxDQUFDLGtCQUFrQk8sSUFBSSxDQUFDSCxLQUFLdkIsUUFBUSxHQUFHO1FBQzFDLE1BQU0sSUFBSW1CLE1BQU07SUFDbEI7SUFFQSxNQUFNNUMsUUFBUVI7SUFDZCxNQUFNNEQsZUFBZXBELE1BQU0yQyxJQUFJLENBQUMsQ0FBQ3hDLElBQU1BLEVBQUVDLEtBQUssS0FBSzRDLEtBQUs1QyxLQUFLLElBQUlELEVBQUVzQixRQUFRLEtBQUt1QixLQUFLdkIsUUFBUTtJQUU3RixJQUFJMkIsY0FBYztRQUNoQixJQUFJQSxhQUFhaEQsS0FBSyxLQUFLNEMsS0FBSzVDLEtBQUssRUFBRTtZQUNyQyxNQUFNLElBQUl3QyxNQUFNO1FBQ2xCLE9BQU87WUFDTCxNQUFNLElBQUlBLE1BQU07UUFDbEI7SUFDRjtJQUVBLE1BQU1TLFVBQWdCO1FBQ3BCdEMsSUFBSVA7UUFDSkosT0FBTzRDLEtBQUs1QyxLQUFLO1FBQ2pCbUIsV0FBV3lCLEtBQUt6QixTQUFTO1FBQ3pCQyxVQUFVd0IsS0FBS3hCLFFBQVE7UUFDdkJDLFVBQVV1QixLQUFLdkIsUUFBUTtRQUN2QkMsVUFBVTtRQUNWQyxZQUFZO1FBQ1pDLFNBQVM7UUFDVEMsU0FBUztRQUNUQyxTQUFTO1FBQ1RDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztJQUNuQztJQUVBbkMsbUJBQW1CdUQ7SUFFbkIsT0FBT0E7QUFDVDtBQUVPLGVBQWVDO0lBQ3BCLG9CQUFvQjtJQUNwQixNQUFNLElBQUlkLFFBQVEsQ0FBQ0MsVUFBWUMsV0FBV0QsU0FBUztBQUNyRDtBQUVPLFNBQVNjO0lBQ2QsSUFBSSxJQUE2QixFQUFFLE9BQU87SUFFMUMsTUFBTTlELFNBQVNDLGFBQWFDLE9BQU8sQ0FBQztJQUNwQyxPQUFPRixTQUFTRyxLQUFLQyxLQUFLLENBQUNKLFVBQVU7QUFDdkM7QUFFTyxTQUFTK0QsVUFBVXpELElBQVU7SUFDbEMsSUFBSSxJQUE2QixFQUFFO0lBQ25DTCxhQUFhWSxPQUFPLENBQUMsUUFBUVYsS0FBS1csU0FBUyxDQUFDUjtBQUM5QztBQUVPLFNBQVMwRDtJQUNkLElBQUksSUFBNkIsRUFBRTtJQUNuQy9ELGFBQWFnRSxVQUFVLENBQUM7QUFDMUI7QUFFQSxTQUFTVCxhQUFhN0MsS0FBYTtJQUNqQyxNQUFNdUQsYUFBYTtJQUNuQixPQUFPQSxXQUFXUixJQUFJLENBQUMvQztBQUN6QjtBQUVBLFNBQVM4QyxnQkFBZ0JYLFFBQWdCO0lBQ3ZDLGtFQUFrRTtJQUNsRSxNQUFNcUIsZ0JBQWdCO0lBQ3RCLE9BQU9BLGNBQWNULElBQUksQ0FBQ1o7QUFDNUI7QUFFTyxTQUFTc0IsV0FBV0MsTUFBYyxFQUFFQyxPQUFzQjtJQUMvRCxNQUFNL0QsUUFBUVI7SUFDZCxNQUFNd0UsWUFBWWhFLE1BQU1FLFNBQVMsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFWSxFQUFFLEtBQUsrQztJQUVsRCxJQUFJRSxjQUFjLENBQUMsR0FBRztRQUNwQixNQUFNLElBQUlwQixNQUFNO0lBQ2xCO0lBRUEsTUFBTXFCLGNBQWM7UUFBRSxHQUFHakUsS0FBSyxDQUFDZ0UsVUFBVTtRQUFFLEdBQUdELE9BQU87SUFBQztJQUN0RC9ELEtBQUssQ0FBQ2dFLFVBQVUsR0FBR0M7SUFFbkJ2RSxhQUFhWSxPQUFPLENBQUMsa0JBQWtCVixLQUFLVyxTQUFTLENBQUNQO0lBRXRELE9BQU9pRTtBQUNUO0FBRU8sU0FBU0MscUJBQXFCSixNQUFjO0lBQ2pELE1BQU05RCxRQUFRUjtJQUNkLE1BQU13RSxZQUFZaEUsTUFBTUUsU0FBUyxDQUFDLENBQUNDLElBQU1BLEVBQUVZLEVBQUUsS0FBSytDO0lBRWxELElBQUlFLGNBQWMsQ0FBQyxHQUFHO1FBQ3BCLE1BQU0sSUFBSXBCLE1BQU07SUFDbEI7SUFFQSxNQUFNN0MsT0FBT0MsS0FBSyxDQUFDZ0UsVUFBVTtJQUM3QixrRUFBa0U7SUFDbEUsTUFBTUMsY0FBYztRQUNsQixHQUFHbEUsSUFBSTtRQUNQb0UsYUFBYSxDQUFDcEUsS0FBS29FLFdBQVc7SUFDaEM7SUFFQW5FLEtBQUssQ0FBQ2dFLFVBQVUsR0FBR0M7SUFDbkJ2RSxhQUFhWSxPQUFPLENBQUMsa0JBQWtCVixLQUFLVyxTQUFTLENBQUNQO0lBRXRELE9BQU9pRTtBQUNUO0FBRU8sU0FBU0csc0JBQXNCTixNQUFjLEVBQUVqQixNQUFjLEVBQUV3QixXQUFtQjtJQUN2RixNQUFNckUsUUFBUVI7SUFDZCxNQUFNd0UsWUFBWWhFLE1BQU1FLFNBQVMsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFWSxFQUFFLEtBQUsrQztJQUVsRCxJQUFJRSxjQUFjLENBQUMsR0FBRztRQUNwQixNQUFNLElBQUlwQixNQUFNO0lBQ2xCO0lBRUEsTUFBTXFCLGNBQWM7UUFDbEIsR0FBR2pFLEtBQUssQ0FBQ2dFLFVBQVU7UUFDbkJ0QyxVQUFVO1FBQ1ZvQixrQkFBa0JEO1FBQ2xCeUIsYUFBYSxJQUFJdEMsT0FBT0MsV0FBVztRQUNuQ29DLGFBQWFBO0lBQ2Y7SUFFQXJFLEtBQUssQ0FBQ2dFLFVBQVUsR0FBR0M7SUFDbkJ2RSxhQUFhWSxPQUFPLENBQUMsa0JBQWtCVixLQUFLVyxTQUFTLENBQUNQO0lBRXRELE9BQU9pRTtBQUNUO0FBRU8sU0FBU00sYUFBYVQsTUFBYztJQUN6QyxNQUFNOUQsUUFBUVI7SUFDZCxNQUFNd0UsWUFBWWhFLE1BQU1FLFNBQVMsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFWSxFQUFFLEtBQUsrQztJQUVsRCxJQUFJRSxjQUFjLENBQUMsR0FBRztRQUNwQixNQUFNLElBQUlwQixNQUFNO0lBQ2xCO0lBRUEsTUFBTXFCLGNBQWM7UUFDbEIsR0FBR2pFLEtBQUssQ0FBQ2dFLFVBQVU7UUFDbkJ0QyxVQUFVO1FBQ1ZvQixrQkFBa0IwQjtRQUNsQkYsYUFBYUU7UUFDYkgsYUFBYUc7SUFDZjtJQUVBeEUsS0FBSyxDQUFDZ0UsVUFBVSxHQUFHQztJQUNuQnZFLGFBQWFZLE9BQU8sQ0FBQyxrQkFBa0JWLEtBQUtXLFNBQVMsQ0FBQ1A7SUFFdEQsT0FBT2lFO0FBQ1Q7QUFFTyxlQUFlUTtJQUNwQiw4RUFBOEU7SUFDOUUsbUZBQW1GO0lBQ25GLDZFQUE2RTtJQUU3RSxJQUFJLElBQTZCLEVBQUU7UUFDakMsaUVBQWlFO1FBQ2pFLDREQUE0RDtRQUM1RCxPQUFPO1lBQ0wxRCxJQUFJO1lBQ0pYLE9BQU87WUFDUG1CLFdBQVc7WUFDWEMsVUFBVTtZQUNWQyxVQUFVO1lBQ1ZDLFVBQVU7WUFDVkMsWUFBWTtZQUNaQyxTQUFTO1lBQ1RDLFNBQVM7WUFDVEMsU0FBUztZQUNUQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7UUFDbkM7SUFDRjtJQUVBLDBDQUEwQztJQUMxQyxPQUFPc0I7QUFDVCIsInNvdXJjZXMiOlsiL2hvbWUvcHJvamVjdC9saWIvYXV0aC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBdXRoZW50aWNhdGlvbiB1dGlsaXRpZXMgYW5kIHR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgZmlyc3ROYW1lOiBzdHJpbmdcbiAgbGFzdE5hbWU6IHN0cmluZ1xuICB1c2VybmFtZTogc3RyaW5nXG4gIGF2YXRhcj86IHN0cmluZ1xuICB1c2VyVHlwZTogXCJ1c2VyXCIgfCBcImFkbWluXCIgfCBcInN1c3BlbmRlZFwiXG4gIGlzVmVyaWZpZWQ6IGJvb2xlYW5cbiAgZGVwb3NpdDogbnVtYmVyXG4gIGVhcm5pbmc6IG51bWJlclxuICBjb3VudHJ5OiBzdHJpbmdcbiAgY3JlYXRlZEF0OiBzdHJpbmdcbiAgaXNTdXNwZW5kZWQ/OiBib29sZWFuXG4gIHN1c3BlbnNpb25SZWFzb24/OiBzdHJpbmdcbiAgc3VzcGVuZGVkQXQ/OiBzdHJpbmdcbiAgc3VzcGVuZGVkQnk/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRoU3RhdGUge1xuICB1c2VyOiBVc2VyIHwgbnVsbFxuICBpc0xvYWRpbmc6IGJvb2xlYW5cbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxVc2VycygpOiBVc2VyW10ge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIFtdXG5cbiAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2Vyc19kYXRhYmFzZVwiKVxuICByZXR1cm4gc3RvcmVkID8gSlNPTi5wYXJzZShzdG9yZWQpIDogW11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVVc2VyVG9EYXRhYmFzZSh1c2VyOiBVc2VyKTogdm9pZCB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm5cblxuICBjb25zdCB1c2VycyA9IGdldEFsbFVzZXJzKClcbiAgY29uc3QgZXhpc3RpbmdJbmRleCA9IHVzZXJzLmZpbmRJbmRleCgodSkgPT4gdS5lbWFpbCA9PT0gdXNlci5lbWFpbClcblxuICBpZiAoZXhpc3RpbmdJbmRleCA+PSAwKSB7XG4gICAgdXNlcnNbZXhpc3RpbmdJbmRleF0gPSB1c2VyXG4gIH0gZWxzZSB7XG4gICAgdXNlcnMucHVzaCh1c2VyKVxuICB9XG5cbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2Vyc19kYXRhYmFzZVwiLCBKU09OLnN0cmluZ2lmeSh1c2VycykpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0VXNlcklkKCk6IHN0cmluZyB7XG4gIGNvbnN0IHVzZXJzID0gZ2V0QWxsVXNlcnMoKVxuICBjb25zdCBtYXhJZCA9IHVzZXJzLnJlZHVjZSgobWF4LCB1c2VyKSA9PiB7XG4gICAgY29uc3QgbnVtSWQgPSBOdW1iZXIucGFyc2VJbnQodXNlci5pZClcbiAgICByZXR1cm4gaXNOYU4obnVtSWQpID8gbWF4IDogTWF0aC5tYXgobWF4LCBudW1JZClcbiAgfSwgMClcblxuICByZXR1cm4gU3RyaW5nKG1heElkICsgMSkucGFkU3RhcnQoMiwgXCIwXCIpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplRGVmYXVsdFVzZXJzKCk6IHZvaWQge1xuICBjb25zdCB1c2VycyA9IGdldEFsbFVzZXJzKClcblxuICBpZiAodXNlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc3QgZGVmYXVsdFVzZXJzOiBVc2VyW10gPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIjAxXCIsXG4gICAgICAgIGVtYWlsOiBcImFkbWluQG1hcmtldHBsYWNlLmNvbVwiLFxuICAgICAgICBmaXJzdE5hbWU6IFwiQWRtaW5cIixcbiAgICAgICAgbGFzdE5hbWU6IFwiVXNlclwiLFxuICAgICAgICB1c2VybmFtZTogXCJhZG1pblwiLFxuICAgICAgICB1c2VyVHlwZTogXCJhZG1pblwiLFxuICAgICAgICBpc1ZlcmlmaWVkOiB0cnVlLFxuICAgICAgICBkZXBvc2l0OiAwLFxuICAgICAgICBlYXJuaW5nOiAwLFxuICAgICAgICBjb3VudHJ5OiBcIlVuaXRlZCBTdGF0ZXNcIixcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogXCIwMlwiLFxuICAgICAgICBlbWFpbDogXCJ3b3JrZXIxQG1hcmtldHBsYWNlLmNvbVwiLFxuICAgICAgICBmaXJzdE5hbWU6IFwiSm9oblwiLFxuICAgICAgICBsYXN0TmFtZTogXCJXb3JrZXJcIixcbiAgICAgICAgdXNlcm5hbWU6IFwiam9obndvcmtlclwiLFxuICAgICAgICB1c2VyVHlwZTogXCJ1c2VyXCIsXG4gICAgICAgIGlzVmVyaWZpZWQ6IHRydWUsXG4gICAgICAgIGRlcG9zaXQ6IDAsXG4gICAgICAgIGVhcm5pbmc6IDAsXG4gICAgICAgIGNvdW50cnk6IFwiVW5pdGVkIFN0YXRlc1wiLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiBcIjAzXCIsXG4gICAgICAgIGVtYWlsOiBcImVtcGxveWVyMUBtYXJrZXRwbGFjZS5jb21cIixcbiAgICAgICAgZmlyc3ROYW1lOiBcIkphbmVcIixcbiAgICAgICAgbGFzdE5hbWU6IFwiRW1wbG95ZXJcIixcbiAgICAgICAgdXNlcm5hbWU6IFwiamFuZWVtcGxveWVyXCIsXG4gICAgICAgIHVzZXJUeXBlOiBcInVzZXJcIixcbiAgICAgICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgZGVwb3NpdDogMTAwLFxuICAgICAgICBlYXJuaW5nOiAwLFxuICAgICAgICBjb3VudHJ5OiBcIlVuaXRlZCBTdGF0ZXNcIixcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9LFxuICAgIF1cblxuICAgIGRlZmF1bHRVc2Vycy5mb3JFYWNoKCh1c2VyKSA9PiBzYXZlVXNlclRvRGF0YWJhc2UodXNlcikpXG4gICAgY29uc29sZS5sb2coXG4gICAgICBcIlt2MF0g4pyFIEluaXRpYWxpemVkIGRlZmF1bHQgdXNlcnM6XCIsXG4gICAgICBkZWZhdWx0VXNlcnMubWFwKCh1KSA9PiBgJHt1LmZpcnN0TmFtZX0gJHt1Lmxhc3ROYW1lfSAoSUQ6ICR7dS5pZH0pYCksXG4gICAgKVxuICB9XG59XG5cbi8vIE1vY2sgYXV0aGVudGljYXRpb24gZnVuY3Rpb25zIChyZXBsYWNlIHdpdGggcmVhbCBBUEkgY2FsbHMgd2hlbiBkYXRhYmFzZSBpcyBjb25uZWN0ZWQpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnbkluKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXI+IHtcbiAgLy8gU2ltdWxhdGUgQVBJIGNhbGxcbiAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXG5cbiAgY29uc3QgdXNlcnMgPSBnZXRBbGxVc2VycygpXG4gIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKCh1KSA9PiB1LmVtYWlsID09PSBlbWFpbClcblxuICBpZiAoIXVzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCIpXG4gIH1cblxuICBpZiAodXNlci51c2VyVHlwZSA9PT0gXCJzdXNwZW5kZWRcIikge1xuICAgIGNvbnN0IHJlYXNvbiA9IHVzZXIuc3VzcGVuc2lvblJlYXNvbiB8fCBcIk5vIHJlYXNvbiBwcm92aWRlZFwiXG4gICAgdGhyb3cgbmV3IEVycm9yKGBZb3VyIGFjY291bnQgaGFzIGJlZW4gc3VzcGVuZGVkLiBSZWFzb246ICR7cmVhc29ufWApXG4gIH1cblxuICBpZiAoZW1haWwgPT09IFwiYWRtaW5AbWFya2V0cGxhY2UuY29tXCIgJiYgcGFzc3dvcmQgPT09IFwiYWRtaW4xMjNcIikge1xuICAgIGNvbnNvbGUubG9nKFwiW3YwXSBBZG1pbiBsb2dpbiBzdWNjZXNzZnVsIGZvcjpcIiwgdXNlci5lbWFpbClcbiAgICByZXR1cm4gdXNlclxuICB9XG5cbiAgaWYgKHBhc3N3b3JkID09PSBcInBhc3N3b3JkMTIzXCIgfHwgcGFzc3dvcmQubGVuZ3RoID49IDgpIHtcbiAgICBjb25zb2xlLmxvZyhcIlt2MF0gVXNlciBsb2dpbiBzdWNjZXNzZnVsIGZvcjpcIiwgdXNlci5lbWFpbClcbiAgICByZXR1cm4gdXNlclxuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZFwiKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnblVwKGRhdGE6IHtcbiAgZW1haWw6IHN0cmluZ1xuICBwYXNzd29yZDogc3RyaW5nXG4gIGZpcnN0TmFtZTogc3RyaW5nXG4gIGxhc3ROYW1lOiBzdHJpbmdcbiAgdXNlcm5hbWU6IHN0cmluZ1xufSk6IFByb21pc2U8VXNlcj4ge1xuICAvLyBTaW11bGF0ZSBBUEkgY2FsbFxuICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSlcblxuICBpZiAoIWlzVmFsaWRFbWFpbChkYXRhLmVtYWlsKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcIilcbiAgfVxuXG4gIGlmIChkYXRhLnBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycyBsb25nXCIpXG4gIH1cblxuICBpZiAoIWlzVmFsaWRQYXNzd29yZChkYXRhLnBhc3N3b3JkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlBhc3N3b3JkIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlciwgb25lIGxvd2VyY2FzZSBsZXR0ZXIsIGFuZCBvbmUgbnVtYmVyXCIpXG4gIH1cblxuICBpZiAoZGF0YS51c2VybmFtZS5sZW5ndGggPCAzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlcm5hbWUgbXVzdCBiZSBhdCBsZWFzdCAzIGNoYXJhY3RlcnMgbG9uZ1wiKVxuICB9XG5cbiAgaWYgKCEvXlthLXpBLVowLTlfXSskLy50ZXN0KGRhdGEudXNlcm5hbWUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlcm5hbWUgY2FuIG9ubHkgY29udGFpbiBsZXR0ZXJzLCBudW1iZXJzLCBhbmQgdW5kZXJzY29yZXNcIilcbiAgfVxuXG4gIGNvbnN0IHVzZXJzID0gZ2V0QWxsVXNlcnMoKVxuICBjb25zdCBleGlzdGluZ1VzZXIgPSB1c2Vycy5maW5kKCh1KSA9PiB1LmVtYWlsID09PSBkYXRhLmVtYWlsIHx8IHUudXNlcm5hbWUgPT09IGRhdGEudXNlcm5hbWUpXG5cbiAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgIGlmIChleGlzdGluZ1VzZXIuZW1haWwgPT09IGRhdGEuZW1haWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFuIGFjY291bnQgd2l0aCB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RzXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgdXNlcm5hbWUgaXMgYWxyZWFkeSB0YWtlblwiKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG5ld1VzZXI6IFVzZXIgPSB7XG4gICAgaWQ6IGdldE5leHRVc2VySWQoKSxcbiAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICBmaXJzdE5hbWU6IGRhdGEuZmlyc3ROYW1lLFxuICAgIGxhc3ROYW1lOiBkYXRhLmxhc3ROYW1lLFxuICAgIHVzZXJuYW1lOiBkYXRhLnVzZXJuYW1lLFxuICAgIHVzZXJUeXBlOiBcInVzZXJcIixcbiAgICBpc1ZlcmlmaWVkOiBmYWxzZSxcbiAgICBkZXBvc2l0OiAwLFxuICAgIGVhcm5pbmc6IDAsXG4gICAgY291bnRyeTogXCJVbml0ZWQgU3RhdGVzXCIsIC8vIERlZmF1bHQgdG8gVVMgaW5zdGVhZCBvZiBoYXJkY29kZWQgQmFuZ2xhZGVzaFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9XG5cbiAgc2F2ZVVzZXJUb0RhdGFiYXNlKG5ld1VzZXIpXG5cbiAgcmV0dXJuIG5ld1VzZXJcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25PdXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIFNpbXVsYXRlIEFQSSBjYWxsXG4gIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdG9yZWRVc2VyKCk6IFVzZXIgfCBudWxsIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsXG5cbiAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2VyXCIpXG4gIHJldHVybiBzdG9yZWQgPyBKU09OLnBhcnNlKHN0b3JlZCkgOiBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVVzZXIodXNlcjogVXNlcik6IHZvaWQge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXNlclwiLCBKU09OLnN0cmluZ2lmeSh1c2VyKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU3RvcmVkVXNlcigpOiB2b2lkIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVyblxuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcInVzZXJcIilcbn1cblxuZnVuY3Rpb24gaXNWYWxpZEVtYWlsKGVtYWlsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvXG4gIHJldHVybiBlbWFpbFJlZ2V4LnRlc3QoZW1haWwpXG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIEF0IGxlYXN0IDggY2hhcmFjdGVycywgb25lIHVwcGVyY2FzZSwgb25lIGxvd2VyY2FzZSwgb25lIG51bWJlclxuICBjb25zdCBwYXNzd29yZFJlZ2V4ID0gL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipcXGQpLns4LH0kL1xuICByZXR1cm4gcGFzc3dvcmRSZWdleC50ZXN0KHBhc3N3b3JkKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVXNlcih1c2VySWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxVc2VyPik6IFVzZXIge1xuICBjb25zdCB1c2VycyA9IGdldEFsbFVzZXJzKClcbiAgY29uc3QgdXNlckluZGV4ID0gdXNlcnMuZmluZEluZGV4KCh1KSA9PiB1LmlkID09PSB1c2VySWQpXG5cbiAgaWYgKHVzZXJJbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBmb3VuZFwiKVxuICB9XG5cbiAgY29uc3QgdXBkYXRlZFVzZXIgPSB7IC4uLnVzZXJzW3VzZXJJbmRleF0sIC4uLnVwZGF0ZXMgfVxuICB1c2Vyc1t1c2VySW5kZXhdID0gdXBkYXRlZFVzZXJcblxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJzX2RhdGFiYXNlXCIsIEpTT04uc3RyaW5naWZ5KHVzZXJzKSlcblxuICByZXR1cm4gdXBkYXRlZFVzZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZVVzZXJTdXNwZW5zaW9uKHVzZXJJZDogc3RyaW5nKTogVXNlciB7XG4gIGNvbnN0IHVzZXJzID0gZ2V0QWxsVXNlcnMoKVxuICBjb25zdCB1c2VySW5kZXggPSB1c2Vycy5maW5kSW5kZXgoKHUpID0+IHUuaWQgPT09IHVzZXJJZClcblxuICBpZiAodXNlckluZGV4ID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbm90IGZvdW5kXCIpXG4gIH1cblxuICBjb25zdCB1c2VyID0gdXNlcnNbdXNlckluZGV4XVxuICAvLyBUb2dnbGUgYmV0d2VlbiB1c2VyIGFuZCBzdXNwZW5kZWQgc3RhdHVzICh1c2luZyBhIGN1c3RvbSBmaWVsZClcbiAgY29uc3QgdXBkYXRlZFVzZXIgPSB7XG4gICAgLi4udXNlcixcbiAgICBpc1N1c3BlbmRlZDogIXVzZXIuaXNTdXNwZW5kZWQsXG4gIH1cblxuICB1c2Vyc1t1c2VySW5kZXhdID0gdXBkYXRlZFVzZXJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2Vyc19kYXRhYmFzZVwiLCBKU09OLnN0cmluZ2lmeSh1c2VycykpXG5cbiAgcmV0dXJuIHVwZGF0ZWRVc2VyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdXNwZW5kVXNlcldpdGhSZWFzb24odXNlcklkOiBzdHJpbmcsIHJlYXNvbjogc3RyaW5nLCBzdXNwZW5kZWRCeTogc3RyaW5nKTogVXNlciB7XG4gIGNvbnN0IHVzZXJzID0gZ2V0QWxsVXNlcnMoKVxuICBjb25zdCB1c2VySW5kZXggPSB1c2Vycy5maW5kSW5kZXgoKHUpID0+IHUuaWQgPT09IHVzZXJJZClcblxuICBpZiAodXNlckluZGV4ID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbm90IGZvdW5kXCIpXG4gIH1cblxuICBjb25zdCB1cGRhdGVkVXNlciA9IHtcbiAgICAuLi51c2Vyc1t1c2VySW5kZXhdLFxuICAgIHVzZXJUeXBlOiBcInN1c3BlbmRlZFwiIGFzIGNvbnN0LFxuICAgIHN1c3BlbnNpb25SZWFzb246IHJlYXNvbixcbiAgICBzdXNwZW5kZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHN1c3BlbmRlZEJ5OiBzdXNwZW5kZWRCeSxcbiAgfVxuXG4gIHVzZXJzW3VzZXJJbmRleF0gPSB1cGRhdGVkVXNlclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJzX2RhdGFiYXNlXCIsIEpTT04uc3RyaW5naWZ5KHVzZXJzKSlcblxuICByZXR1cm4gdXBkYXRlZFVzZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlVXNlcih1c2VySWQ6IHN0cmluZyk6IFVzZXIge1xuICBjb25zdCB1c2VycyA9IGdldEFsbFVzZXJzKClcbiAgY29uc3QgdXNlckluZGV4ID0gdXNlcnMuZmluZEluZGV4KCh1KSA9PiB1LmlkID09PSB1c2VySWQpXG5cbiAgaWYgKHVzZXJJbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBmb3VuZFwiKVxuICB9XG5cbiAgY29uc3QgdXBkYXRlZFVzZXIgPSB7XG4gICAgLi4udXNlcnNbdXNlckluZGV4XSxcbiAgICB1c2VyVHlwZTogXCJ1c2VyXCIgYXMgY29uc3QsXG4gICAgc3VzcGVuc2lvblJlYXNvbjogdW5kZWZpbmVkLFxuICAgIHN1c3BlbmRlZEF0OiB1bmRlZmluZWQsXG4gICAgc3VzcGVuZGVkQnk6IHVuZGVmaW5lZCxcbiAgfVxuXG4gIHVzZXJzW3VzZXJJbmRleF0gPSB1cGRhdGVkVXNlclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJzX2RhdGFiYXNlXCIsIEpTT04uc3RyaW5naWZ5KHVzZXJzKSlcblxuICByZXR1cm4gdXBkYXRlZFVzZXJcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXIoKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgdmFsaWRhdGUgSldUIHRva2VucyBvciBzZXNzaW9uIGNvb2tpZXNcbiAgLy8gRm9yIG5vdywgd2UnbGwgc2ltdWxhdGUgZ2V0dGluZyB0aGUgY3VycmVudCB1c2VyIGZyb20gbG9jYWxTdG9yYWdlIG9uIHRoZSBjbGllbnRcbiAgLy8gb3IgcmV0dXJuIG51bGwgb24gdGhlIHNlcnZlciAoc2luY2Ugd2UgZG9uJ3QgaGF2ZSByZWFsIHNlc3Npb24gbWFuYWdlbWVudClcblxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIC8vIFNlcnZlci1zaWRlOiBJbiBhIHJlYWwgYXBwLCB5b3UnZCB2YWxpZGF0ZSBzZXNzaW9uIHRva2VucyBoZXJlXG4gICAgLy8gRm9yIGRlbW8gcHVycG9zZXMsIHJldHVybiBhIG1vY2sgYWRtaW4gdXNlciBmb3IgQVBJIGNhbGxzXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcIjAxXCIsXG4gICAgICBlbWFpbDogXCJhZG1pbkBtYXJrZXRwbGFjZS5jb21cIixcbiAgICAgIGZpcnN0TmFtZTogXCJBZG1pblwiLFxuICAgICAgbGFzdE5hbWU6IFwiVXNlclwiLFxuICAgICAgdXNlcm5hbWU6IFwiYWRtaW5cIixcbiAgICAgIHVzZXJUeXBlOiBcImFkbWluXCIsXG4gICAgICBpc1ZlcmlmaWVkOiB0cnVlLFxuICAgICAgZGVwb3NpdDogMCxcbiAgICAgIGVhcm5pbmc6IDAsXG4gICAgICBjb3VudHJ5OiBcIlVuaXRlZCBTdGF0ZXNcIixcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH1cbiAgfVxuXG4gIC8vIENsaWVudC1zaWRlOiBHZXQgdXNlciBmcm9tIGxvY2FsU3RvcmFnZVxuICByZXR1cm4gZ2V0U3RvcmVkVXNlcigpXG59XG4iXSwibmFtZXMiOlsiZ2V0QWxsVXNlcnMiLCJzdG9yZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwic2F2ZVVzZXJUb0RhdGFiYXNlIiwidXNlciIsInVzZXJzIiwiZXhpc3RpbmdJbmRleCIsImZpbmRJbmRleCIsInUiLCJlbWFpbCIsInB1c2giLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZ2V0TmV4dFVzZXJJZCIsIm1heElkIiwicmVkdWNlIiwibWF4IiwibnVtSWQiLCJOdW1iZXIiLCJwYXJzZUludCIsImlkIiwiaXNOYU4iLCJNYXRoIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJpbml0aWFsaXplRGVmYXVsdFVzZXJzIiwibGVuZ3RoIiwiZGVmYXVsdFVzZXJzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJ1c2VybmFtZSIsInVzZXJUeXBlIiwiaXNWZXJpZmllZCIsImRlcG9zaXQiLCJlYXJuaW5nIiwiY291bnRyeSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImZvckVhY2giLCJjb25zb2xlIiwibG9nIiwibWFwIiwic2lnbkluIiwicGFzc3dvcmQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJmaW5kIiwiRXJyb3IiLCJyZWFzb24iLCJzdXNwZW5zaW9uUmVhc29uIiwic2lnblVwIiwiZGF0YSIsImlzVmFsaWRFbWFpbCIsImlzVmFsaWRQYXNzd29yZCIsInRlc3QiLCJleGlzdGluZ1VzZXIiLCJuZXdVc2VyIiwic2lnbk91dCIsImdldFN0b3JlZFVzZXIiLCJzdG9yZVVzZXIiLCJjbGVhclN0b3JlZFVzZXIiLCJyZW1vdmVJdGVtIiwiZW1haWxSZWdleCIsInBhc3N3b3JkUmVnZXgiLCJ1cGRhdGVVc2VyIiwidXNlcklkIiwidXBkYXRlcyIsInVzZXJJbmRleCIsInVwZGF0ZWRVc2VyIiwidG9nZ2xlVXNlclN1c3BlbnNpb24iLCJpc1N1c3BlbmRlZCIsInN1c3BlbmRVc2VyV2l0aFJlYXNvbiIsInN1c3BlbmRlZEJ5Iiwic3VzcGVuZGVkQXQiLCJhY3RpdmF0ZVVzZXIiLCJ1bmRlZmluZWQiLCJnZXRVc2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./lib/auth.ts\n");

/***/ })

};
;